@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   Z-INDEX LAYER SYSTEM (Phase 1)

   Unified, scalable z-index hierarchy.
   Use these CSS variables instead of hardcoded values.
   ============================================ */
:root {
  /* ============================================
     Layer Hierarchy (ascending)
     ============================================ */
  --z-canvas: 0;           /* Network visualization canvas */
  --z-overlay: 10;         /* Canvas overlays (legend, zoom controls) */
  --z-panel: 20;           /* Side panels (UnifiedRightPanel) */
  --z-hud: 30;             /* Floating HUD elements (top-left info) */
  --z-notification: 40;    /* Toast notifications */
  --z-modal: 50;           /* Blocking modals (round summary, events) */
  --z-tooltip: 60;         /* Tooltips (highest - always visible) */

  /* ============================================
     Design System: Surfaces (Phase 5)
     Dark theme with subtle blue undertone
     ============================================ */
  --surface-base: hsl(220, 20%, 10%);
  --surface-elevated: hsl(220, 20%, 14%);
  --surface-overlay: hsl(220, 20%, 18%);

  /* ============================================
     Design System: Borders
     ============================================ */
  --border-subtle: hsla(220, 20%, 50%, 0.15);
  --border-default: hsla(220, 20%, 50%, 0.25);
  --border-strong: hsla(220, 20%, 50%, 0.40);

  /* ============================================
     Design System: Trust Colors (consistent)
     Used for actor trust levels across UI
     ============================================ */
  --trust-high: hsl(142, 71%, 45%);      /* Green - trusted actors */
  --trust-medium: hsl(45, 93%, 47%);     /* Yellow/Amber - neutral */
  --trust-low: hsl(0, 84%, 60%);         /* Red - low trust/manipulated */

  /* ============================================
     Design System: Accent Colors
     ============================================ */
  --accent-primary: hsl(217, 91%, 60%);  /* Blue - primary actions */
  --accent-success: hsl(142, 71%, 45%);  /* Green - success states */
  --accent-warning: hsl(38, 92%, 50%);   /* Orange - warnings */
  --accent-danger: hsl(0, 84%, 60%);     /* Red - errors/danger */

  /* ============================================
     Design System: Spacing (8px grid)
     ============================================ */
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;
  --space-8: 32px;

  /* ============================================
     Design System: Border Radius
     ============================================ */
  --radius-sm: 4px;   /* Small elements */
  --radius-md: 6px;   /* Buttons */
  --radius-lg: 8px;   /* Cards */
  --radius-xl: 12px;  /* Panels */
  --radius-2xl: 16px; /* Modals */

  /* ============================================
     Design System: Transitions
     ============================================ */
  --transition-fast: 100ms ease;
  --transition-normal: 150ms ease;
  --transition-slow: 300ms ease;
  --transition-smooth: 300ms cubic-bezier(0.4, 0, 0.2, 1);

  /* ============================================
     Design System: Game State Colors (Week 5)
     ============================================ */
  /* Crisis levels */
  --crisis-1: hsl(38, 92%, 50%);    /* Amber */
  --crisis-2: hsl(25, 95%, 53%);    /* Orange */
  --crisis-3: hsl(0, 84%, 60%);     /* Red */
  --crisis-4: hsl(0, 72%, 51%);     /* Dark Red */
  --crisis-5: hsl(0, 63%, 35%);     /* Darkest Red */

  /* Combo system */
  --combo-inactive: hsl(220, 13%, 46%);
  --combo-building: hsl(217, 91%, 60%);
  --combo-ready: hsl(263, 70%, 50%);
  --combo-active: hsl(38, 92%, 50%);
  --combo-glow: hsla(263, 70%, 50%, 0.4);

  /* Betrayal/Warning */
  --betrayal-warning: hsl(45, 93%, 58%);
  --betrayal-danger: hsl(25, 95%, 53%);
  --betrayal-critical: hsl(0, 84%, 60%);

  /* Opportunity */
  --opportunity-available: hsl(142, 71%, 45%);
  --opportunity-expiring: hsl(38, 92%, 50%);
  --opportunity-urgent: hsl(0, 84%, 60%);
  --opportunity-glow: hsla(142, 71%, 45%, 0.3);

  /* Resource changes */
  --resource-increase: hsl(142, 71%, 45%);
  --resource-decrease: hsl(0, 84%, 60%);
}

/* Custom base styles */
@layer base {
  html {
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    @apply bg-gray-100 text-gray-900;
  }

  /* Remove default button styles */
  button {
    @apply focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2;
  }
}

/* Custom components */
@layer components {
  .btn-primary {
    @apply px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors;
  }

  .btn-secondary {
    @apply px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg transition-colors;
  }

  .card {
    @apply bg-white rounded-2xl shadow-soft p-6;
  }

  .input {
    @apply w-full px-4 py-2 border border-gray-200 rounded-lg focus:border-blue-500 focus:ring-1 focus:ring-blue-500;
  }
}

/* Custom utilities */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .animate-fade-in {
    animation: fadeIn 0.3s ease-out forwards;
  }

  .animate-slide-up {
    animation: slideUp 0.3s ease-out forwards;
  }

  /* ============================================
     Interactive States (Phase 5)
     Apply to clickable elements for consistent UX
     ============================================ */
  .interactive {
    transition: all var(--transition-normal);
    cursor: pointer;
  }

  .interactive:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }

  .interactive:active {
    transform: scale(0.98);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  }

  /* Subtle variant for smaller elements */
  .interactive-subtle {
    transition: all var(--transition-fast);
    cursor: pointer;
  }

  .interactive-subtle:hover {
    opacity: 0.85;
  }

  .interactive-subtle:active {
    transform: scale(0.97);
  }

  /* Glow variant for emphasized elements */
  .interactive-glow {
    transition: all var(--transition-normal);
    cursor: pointer;
  }

  .interactive-glow:hover {
    box-shadow: 0 0 20px var(--accent-primary);
  }

  .interactive-glow:active {
    transform: scale(0.98);
    box-shadow: 0 0 10px var(--accent-primary);
  }
}

/* ============================================
   KEYFRAMES (Week 5: Mikroanimationen)
   ============================================ */

/* Basic transitions */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeOut {
  from { opacity: 1; }
  to { opacity: 0; }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Panel animations */
@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideOutRight {
  from {
    opacity: 1;
    transform: translateX(0);
  }
  to {
    opacity: 0;
    transform: translateX(100%);
  }
}

@keyframes slideInLeft {
  from {
    opacity: 0;
    transform: translateX(-100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideInBottom {
  from {
    opacity: 0;
    transform: translateY(100%);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Pulse and glow effects */
@keyframes pulse-ring {
  0% {
    transform: scale(1);
    opacity: 0.8;
  }
  100% {
    transform: scale(2);
    opacity: 0;
  }
}

@keyframes pulse-soft {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.8;
    transform: scale(1.02);
  }
}

@keyframes glow-pulse {
  0%, 100% {
    box-shadow: 0 0 5px var(--combo-glow);
  }
  50% {
    box-shadow: 0 0 20px var(--combo-glow), 0 0 30px var(--combo-glow);
  }
}

@keyframes crisis-pulse {
  0%, 100% {
    background-color: var(--crisis-3);
  }
  50% {
    background-color: var(--crisis-4);
  }
}

@keyframes ripple {
  0% {
    transform: scale(0);
    opacity: 1;
  }
  100% {
    transform: scale(4);
    opacity: 0;
  }
}

/* Number/value change animations */
@keyframes countUp {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes countDown {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes valueFlash {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.15);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes valueIncrease {
  0% {
    color: var(--resource-increase);
    transform: scale(1.2);
  }
  100% {
    color: inherit;
    transform: scale(1);
  }
}

@keyframes valueDecrease {
  0% {
    color: var(--resource-decrease);
    transform: scale(1.2);
  }
  100% {
    color: inherit;
    transform: scale(1);
  }
}

/* Button hover effects */
@keyframes buttonShake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-2px); }
  20%, 40%, 60%, 80% { transform: translateX(2px); }
}

@keyframes buttonBounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-3px); }
}

/* Toast/notification animations */
@keyframes slide-down {
  from {
    transform: translateY(-20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes progress {
  from { width: 100%; }
  to { width: 0%; }
}

/* Typing effect for dialogs */
@keyframes blink-cursor {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

@keyframes typewriter-reveal {
  from { max-width: 0; }
  to { max-width: 100%; }
}

/* Opportunity highlight */
@keyframes opportunity-glow {
  0%, 100% {
    box-shadow: 0 0 8px var(--opportunity-glow);
    border-color: var(--opportunity-available);
  }
  50% {
    box-shadow: 0 0 16px var(--opportunity-glow), 0 0 24px var(--opportunity-glow);
    border-color: var(--opportunity-available);
  }
}

/* Crisis warning */
@keyframes crisis-flash {
  0%, 100% {
    background-color: transparent;
  }
  50% {
    background-color: hsla(0, 84%, 60%, 0.1);
  }
}

/* Scale in/out */
@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes scaleOut {
  from {
    opacity: 1;
    transform: scale(1);
  }
  to {
    opacity: 0;
    transform: scale(0.9);
  }
}

/* ============================================
   ANIMATION UTILITY CLASSES
   ============================================ */

.animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
.animate-fade-out { animation: fadeOut 0.3s ease-out forwards; }
.animate-slide-up { animation: slideUp 0.3s ease-out forwards; }
.animate-slide-down { animation: slide-down 0.3s ease-out forwards; }
.animate-slide-in-right { animation: slideInRight 0.3s ease-out forwards; }
.animate-slide-in-left { animation: slideInLeft 0.3s ease-out forwards; }
.animate-slide-in-bottom { animation: slideInBottom 0.3s ease-out forwards; }
.animate-scale-in { animation: scaleIn 0.2s ease-out forwards; }

/* Value change animations */
.animate-value-increase { animation: valueIncrease 0.5s ease-out; }
.animate-value-decrease { animation: valueDecrease 0.5s ease-out; }
.animate-value-flash { animation: valueFlash 0.3s ease-out; }
.animate-count-up { animation: countUp 0.3s ease-out; }
.animate-count-down { animation: countDown 0.3s ease-out; }

/* Pulsing/glowing effects */
.animate-pulse-soft { animation: pulse-soft 2s ease-in-out infinite; }
.animate-glow-pulse { animation: glow-pulse 2s ease-in-out infinite; }
.animate-crisis-pulse { animation: crisis-pulse 1s ease-in-out infinite; }
.animate-opportunity-glow { animation: opportunity-glow 2s ease-in-out infinite; }
.animate-crisis-flash { animation: crisis-flash 1s ease-in-out infinite; }

/* Button effects */
.animate-shake { animation: buttonShake 0.4s ease-in-out; }
.animate-bounce { animation: buttonBounce 0.3s ease-out; }

/* Typing cursor */
.typing-cursor::after {
  content: 'â–Œ';
  animation: blink-cursor 1s step-end infinite;
  margin-left: 2px;
  color: var(--accent-primary);
}

/* Canvas styles */
.game-canvas {
  touch-action: none;
  user-select: none;
}

/* Scrollbar styles */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-gray-100 rounded-full;
}

::-webkit-scrollbar-thumb {
  @apply bg-gray-300 rounded-full hover:bg-gray-400;
}

/* Selection styles */
::selection {
  @apply bg-blue-100 text-blue-900;
}
